# 路由说明
凡是需要登录后进行操作的页面都规定为MainFrame的子路由;(统一为头部菜单、左侧目录的风格)

## 路由配置
旧版配置为在一级路由下用views属性创建一个容器,在此容器中跳转select、edit的方式；现在变更为默认在一个页面中创建多个ui-view达到切换状态保持的效果。

### 目录
其中核心路由文件**coreRouter.js**为常规的系统操作页面的路由配置；建议项目中增加新的页面统一写到**operationRouter.js**中


    EIP/                         // 主目录
       ├ router/                 // 路由目录
          ├ coreRouter.js        // 核心路由配置
          ├ operationRouter.js   // 项目新页面路由配置
     

### 代码配置示例
这里为了达到状态保持，将列表和编辑页都做为了一个容器对待,因为容器是一直存在的，而容器中的内容却会随着路由变化而发生改变。(原先的select和edit都归为同一个容器)
```js
/* 设置父路由的views属性;此属性根据所有子路由name和viewsName组成

      var templateUrl = '<div ui-view="Edit" ng-show="$state.includes(\'MainFrame.UserMange.Edit\')"></div>' +
                    '<div ui-view="Select" ng-show="$state.includes(\'MainFrame.UserMange.Select\')"></div>'
      views: {
            'keepState': { templateUrl: templateUrl },
      }

   */
//角色管理
        states.push({
            name: 'MainFrame.Role', url: '/Role',
            deepStateRedirect: { default: "MainFrame.Role.Select" },
        });
        states.push({
            name: 'MainFrame.Role.Select', url: '/Select?:menuID',
            views: {
                'Select': { templateUrl: '../Views/SystemAdmin/Role.html' }
            },
            sticky: true   //控制是否启动状态保持功能
        });
        states.push({
            name: 'MainFrame.Role.Edit', url: '/RoleEdit?:transParam',
            views: {
                'Edit': { templateUrl: '../Views/SystemAdmin/RoleEdit.html' }
            }
        });

        setRouterConfig()
```
其中**sticky: true** 控制是否启动状态保持功能，如不需要记录状态则不写此属性即可；
setRouterConfig()函数作用为将所有路由进行格式的统一处理，需要则所有路由配置完成后执行此函数。

### 问题解决
1. 列表页为状态保持，当编辑页数据发生变化后返回时列表页的数据怎样更新？

 答：列表页的数据更新由编辑页保存操作触发,当点过保存后再次返回数据自动更新为修改后的数据。

2. 路由配置后如何控制状态保持？

 答：所有路由按照例子中的方式配置后,状态保持的开关通过sticky: true来控制,当为true时开启状态保持,false则关闭,默认为false。

3. 路由的配置必须与示例中完全一致吗？

 答：不需要，根据项目情况决定;示例只是提供了一种状态保持的配置方法。具体路由的使用可参考**ui-router**官方**api**
